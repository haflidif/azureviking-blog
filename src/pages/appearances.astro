---
import Layout from '@/layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { formatDate } from '@/lib/utils/date';
import Breadcrumbs from '@/components/Breadcrumbs.svelte';
import { basePath } from '@/lib/utils/basePath';
import AppearanceCard from '@/components/AppearanceCard.svelte';

const appearances = await getCollection('appearances');
const sorted = appearances.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout title="Talks & Appearances">
  <Breadcrumbs items={[{ name: 'Talks & Appearances', href: basePath('/appearances') }]} />

  <div class="mb-8 sm:mb-10">
    <h1
      class="text-2xl sm:text-3xl lg:text-4xl font-black tracking-tight text-foreground leading-[1.1]"
    >
      Talks & Appearances
    </h1>
    <p class="mt-3 text-sm sm:text-base text-muted-foreground max-w-2xl leading-relaxed">
      Conference talks, community presentations, and video content.
    </p>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    {
      sorted.map((item) => (
        <AppearanceCard
          title={item.data.title}
          event={item.data.event}
          date={formatDate(item.data.date)}
          type={item.data.type}
          slug={item.id}
          youtubeId={item.data.youtubeId}
          description={item.data.description}
          tags={item.data.tags}
          duration={item.data.duration}
          coverImage={item.data.coverImage}
        />
      ))
    }
  </div>
</Layout>
